## Coins as Protest Project ##

# Necesssary packages.
library(NLP)
library(tm)
library(SnowballC)
library(devtools)
install_github("mannau/tm.plugin.sentiment")
library(rex)
library(stringr)

# Loading in corpus.
docs <- file.path("file path") 
dir(docs)
corp <- Corpus(DirSource(docs))
summary(corp)

# Inspect.
writeLines(as.character(corp[[3]]))

# Polarity scores.
stop <- function(x) removeWords(x, stopwords("english"))
control <- list(removePunctuation, removeNumbers, content_transformer(tolower),
                stop, stripWhitespace, stemDocument)

corp <- tm_map(corp, FUN=tm_reduce, tmFuns=control)
tdm <- TermDocumentMatrix(corp)

positive <- inspect(TermDocumentMatrix(corp, list(dictionary=dic_gi$positive)))
negative <- inspect(TermDocumentMatrix(corp, list(dictionary=dic_gi$negative)))
write.csv(positive, file="positive.csv")
write.csv(negative, file="negative.csv")

possum <- colSums(positive, na.rm=F)
negsum <- colSums(negative, na.rm=F)
diff <- possum - negsum
sum <- possum + negsum
result <- diff/sum
write.csv(result, file="polarity.csv")

# Importing NER document tagged in CoreNLP (Bash).
tags <- file.path("/Users/mat4a/Cap/tagged docs")
tags2 <- Corpus(DirSource(tags))
tags2 <- DocumentTermMatrix(tags2)
tags2 <- as.matrix(tags2)
write.csv(tags2, file="tags.csv")
tag3 <- read.csv(file="Person_Tags.csv")
